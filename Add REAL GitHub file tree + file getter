// === REAL GITHUB FILE TREE & RAW FILE ===
async function githubGetTree(env: Env, repoFull: string, sha: string) {
  const res = await fetch(
    `https://api.github.com/repos/${repoFull}/git/trees/${sha}?recursive=1`,
    {
      headers: {
        Authorization: `Bearer ${env.GITHUB_TOKEN}`,
        Accept: "application/vnd.github+json",
        "User-Agent": "asa-multisync",
      },
    }
  );
  if (!res.ok) return null;
  return res.json();
}

async function githubGetFile(env: Env, repoFull: string, path: string) {
  const res = await fetch(
    `https://api.github.com/repos/${repoFull}/contents/${path}`,
    {
      headers: {
        Authorization: `Bearer ${env.GITHUB_TOKEN}`,
        Accept: "application/vnd.github.raw",
        "User-Agent": "asa-multisync",
      },
    }
  );
  if (!res.ok) return null;
  return res.text();
}
